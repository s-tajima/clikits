#!/usr/bin/env ruby

require 'octokit'
require 'pp'


repo_name = ARGV.shift

Octokit.configure do |c|
  c.auto_paginate = true
end

access_token = ENV['GITHUB_ACCESS_TOKEN']

client = Octokit::Client.new(:access_token => access_token)

repo = client.repo(repo_name)

options = {
  :accept => 'application/vnd.github+json'
}

client.enable_vulnerability_alerts(repo.full_name, options)

puts "Vulnerability alerts for #{repo_name} was enabled."
